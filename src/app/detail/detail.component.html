<ion-content [fullscreen]="true">
  <!-- <ion-buttons slot="end">
    <ion-button (click)="dismiss()">Fechar</ion-button>
  </ion-buttons> -->
  <ion-card>
    <div class="add-tracker" >
      <ion-button (click)="addToTracker('Watched')"size="small">
        <ng-container *ngIf="!trackerLoading['Watched']; else watchedSpinner">
          Watched
        </ng-container>
        <ng-template #watchedSpinner>
          <ion-spinner name="bubbles"></ion-spinner>
        </ng-template>
      </ion-button>
      <ion-button (click)="addToTracker('To Watch')"size="small">
        <ng-container *ngIf="!trackerLoading['To Watch']; else toWatchSpinner">
          To Watch
        </ng-container>
        <ng-template #toWatchSpinner>
          <ion-spinner name="bubbles"></ion-spinner>
        </ng-template>
      </ion-button>
      <ion-button (click)="addToTracker('In Progress')"size="small">
        <ng-container *ngIf="!trackerLoading['In Progress']; else inProgressSpinner">
          In Progress
        </ng-container>
        <ng-template #inProgressSpinner>
          <ion-spinner name="bubbles"></ion-spinner>
        </ng-template>
      </ion-button>
    </div>
    <img class="poster" alt="Silhouette of mountains"
      [src]="data.Poster === 'N/A' ? 'https://ionicframework.com/docs/img/demos/card-media.png' : data.Poster" />
    <ion-card-header>
      <ion-card-title>{{data.Title}}</ion-card-title>
      <ion-card-subtitle>{{data.Type | toTitleCase}}</ion-card-subtitle>
      <ion-card-subtitle>{{data.Year}}</ion-card-subtitle>
    </ion-card-header>

    <ion-card-content *ngIf="!loading && details">
      <div class="ratings">
        <ion-badge *ngFor="let r of details?.Ratings; let i = index"
          [style]="'--background: transparent;border: 1px solid '+colors[i]+';font-weight: 100;'">{{r.Source}} -
          {{r.Value}}</ion-badge>
      </div>
      <p>{{details.Plot}}</p>
    </ion-card-content>
    <ion-card-content *ngIf="loading">
      <ion-spinner name="bubbles"></ion-spinner>
    </ion-card-content>
  </ion-card>
</ion-content>